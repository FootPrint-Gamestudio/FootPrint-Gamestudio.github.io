function initThemeSystem(){"dark"===localStorage.getItem("theme")?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode");const e=document.getElementById("themeToggle");e&&e.addEventListener("click",toggleTheme)}function toggleTheme(){document.body.classList.toggle("dark-mode");const e=document.body.classList.contains("dark-mode");localStorage.setItem("theme",e?"dark":"light"),showNotification(e?"Dark theme activated":"Light theme activated")}function showNotification(e){const t=document.getElementById("notification"),o=document.getElementById("notificationText");t&&o&&(o.textContent=e,t.classList.add("show"),setTimeout((()=>{t.classList.remove("show")}),3e3))}function initScrollDownButton(){const e=document.querySelector(".scroll-down");e&&e.addEventListener("click",(()=>{const e=document.querySelector("#games");e&&window.scrollTo({top:e.offsetTop-80,behavior:"smooth"})}))}function initLogoAnimation(){const e=document.querySelector(".logo");e&&window.addEventListener("scroll",(()=>{const t=window.scrollY;e.style.transform=`rotate(${5-.1*t}deg) scale(${1-2e-4*t})`}))}function initBackToTopButton(){const e=document.getElementById("backToTop");e&&(window.addEventListener("scroll",(()=>{e.classList.toggle("visible",window.scrollY>300)})),e.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})})))}async function loadGamesData(){try{const e=await fetch("game.json",{headers:{"Content-Type":"application/json",Accept:"application/json"},cache:"no-cache",referrerPolicy:"strict-origin-when-cross-origin"});if(!e.ok)throw new Error("Network response was not ok");const t=await e.json();renderGames(t),addGamesSchema(t)}catch(e){showGamesError()}}function renderGames(e){const t=document.getElementById("gamesGrid");t&&(t.innerHTML="",e.forEach((e=>{const o=document.createElement("div");o.className="game-card",o.itemscope="",o.itemtype="https://schema.org/VideoGame",e.is_active||(o.style.opacity="0.5",o.style.filter="grayscale(80%)"),o.innerHTML=`\n            <div class="game-image-container">\n                <img src="${e.image_url?"static/image/"+e.image_url:"static/icons/placeholder.webp"}" \n                     alt="${e.name} by FOOTPRINT Game Studio" \n                     class="game-image" \n                     loading="lazy" \n                     width="300" \n                     height="200" \n                     itemprop="image">\n                ${e.is_new?'<div class="game-badge">New</div>':""}\n            </div>\n            <div class="game-info">\n                <h3 class="game-name" itemprop="name">${e.name}</h3>\n                <p class="game-description" itemprop="description">${e.description}</p>\n                <meta itemprop="gamePlatform" content="${e.platform||"PC"}">\n                <meta itemprop="applicationCategory" content="Game">\n                <a href="${e.store_link||"#"}" \n                   class="game-link" \n                   ${e.is_active?"":'style="background: #ccc; pointer-events: none;"'} \n                   itemprop="url" \n                   rel="${e.is_active?"noopener":"nofollow"}">\n                    ${e.is_active?"View In Store":"Coming Soon"}\n                </a>\n            </div>\n        `,t.appendChild(o)})))}function addGamesSchema(e){const t={"@context":"https://schema.org","@type":"ItemList",itemListElement:e.map(((e,t)=>({"@type":"ListItem",position:t+1,item:{"@type":"VideoGame",name:e.name,description:e.description,url:e.store_link||window.location.href,image:e.image_url?window.location.origin+"/static/image/"+e.image_url:"",author:{"@type":"Organization",name:"FOOTPRINT Game Studio"}}})))},o=document.createElement("script");o.type="application/ld+json",o.textContent=JSON.stringify(t),document.head.appendChild(o)}function showGamesError(){const e=document.getElementById("gamesGrid");e&&(e.innerHTML='\n        <div class="error-message" role="alert">\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="24" height="24">\n                <path d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/>\n            </svg>\n            <p>We\'re having trouble loading our games. Please refresh the page or try again later.</p>\n            <button onclick="loadGamesData()" class="retry-btn">Retry</button>\n        </div>\n    ')}document.addEventListener("DOMContentLoaded",(()=>{document.body.classList.add("loaded"),document.body.removeAttribute("data-loading"),initThemeSystem(),initScrollDownButton(),initLogoAnimation(),initBackToTopButton(),loadGamesData()})),window.loadGamesData=loadGamesData;
